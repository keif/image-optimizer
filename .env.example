# Server Configuration
PORT=8080

# CORS Configuration
# Comma-separated list of allowed origins for cross-origin requests
# For local development:
CORS_ORIGINS=http://localhost:3000,http://localhost:8080
# For production (update with your actual frontend URL):
# CORS_ORIGINS=https://your-frontend.onrender.com,https://your-domain.com

# Database Configuration
DB_PATH=./data/api_keys.db

# Rate Limiting Configuration
# Enable or disable rate limiting (default: true)
RATE_LIMIT_ENABLED=true
# Maximum number of requests allowed (default: 100)
RATE_LIMIT_MAX=100
# Time window for rate limiting (default: 1m)
# Supported formats: 1s, 1m, 1h, etc.
RATE_LIMIT_WINDOW=1m

# API Key Authentication
# Enable or disable API key authentication (default: true)
API_KEY_AUTH_ENABLED=true

# Public Optimization Access
# Enable public access to /optimize, /batch-optimize, /pack-sprites, and /optimize-spritesheet endpoints without API keys
# This is useful for public web UI instances with rate limiting
# Default: false (secure by default - requires API keys)
# Set to true for public instances like sosquishy.io
PUBLIC_OPTIMIZATION_ENABLED=false

# Trusted Origins (Origin-Based Bypass)
# Comma-separated list of origins that can access the API without API keys
# This allows your frontend to call the API without requiring API keys,
# while everyone else still needs authentication
# Supports exact matches and wildcard subdomains (e.g., https://*.sosquishy.io)
# Format: https://domain.com or https://*.domain.com
# Default: empty (no trusted origins)
TRUSTED_ORIGINS=

# Examples:
# For production frontend:
# TRUSTED_ORIGINS=https://sosquishy.io,https://www.sosquishy.io
#
# With wildcard for all subdomains:
# TRUSTED_ORIGINS=https://*.sosquishy.io
#
# For local development:
# TRUSTED_ORIGINS=http://localhost:3000,http://localhost:8080

# Example configurations:
# 1. Public website with trusted frontend (recommended for sosquishy.io):
#    API_KEY_AUTH_ENABLED=true
#    PUBLIC_OPTIMIZATION_ENABLED=false
#    TRUSTED_ORIGINS=https://sosquishy.io,https://www.sosquishy.io
#    RATE_LIMIT_ENABLED=true
#
# 2. Public website (anyone can use, less secure):
#    API_KEY_AUTH_ENABLED=true
#    PUBLIC_OPTIMIZATION_ENABLED=true
#    RATE_LIMIT_ENABLED=true
#
# 3. Private/self-hosted (API keys required):
#    API_KEY_AUTH_ENABLED=true
#    PUBLIC_OPTIMIZATION_ENABLED=false
#    TRUSTED_ORIGINS=
#
# 4. Local development (easy testing):
#    API_KEY_AUTH_ENABLED=false
#    PUBLIC_OPTIMIZATION_ENABLED=true
#    TRUSTED_ORIGINS=http://localhost:3000

# Domain Whitelist for URL-based Image Fetching
# Comma-separated list of allowed domains
# Empty value means all domains are allowed (not recommended for production)
# Default includes: cloudinary.com, imgur.com, unsplash.com, pexels.com, localhost, 127.0.0.1
ALLOWED_DOMAINS=

# Example with custom domains:
# ALLOWED_DOMAINS=example.com,cdn.example.com,images.mysite.com
